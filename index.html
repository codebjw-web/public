<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MES/ERP SaaS 법적 안전성 확보 가이드</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .step-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.2);
        }

        .step-card.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .step-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .step-card.active .step-number {
            background: white;
            color: #667eea;
        }

        .step-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .step-description {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .detail-panel {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .detail-panel h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .detail-section {
            margin-bottom: 30px;
        }

        .detail-section h3 {
            color: #333;
            font-size: 1.3rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .document-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .document-card h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .document-card p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .law-reference {
            background: #fff3cd;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #856404;
            font-weight: bold;
            margin-top: 10px;
        }

        .sample-box {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
        }

        .sample-box pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .link-section {
            margin-top: 20px;
        }

        .link-list {
            list-style: none;
        }

        .link-list li {
            margin-bottom: 10px;
        }

        .link-item {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .link-item:hover {
            background: #764ba2;
            transform: translateX(5px);
        }

        .checklist {
            background: #d4edda;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .checklist h4 {
            color: #155724;
            margin-bottom: 10px;
        }

        .checklist ul {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .checklist li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }

        .warning-box strong {
            color: #856404;
        }

        .process-flow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }

        .process-step {
            flex: 1;
            min-width: 150px;
            text-align: center;
            position: relative;
        }

        .process-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 10px;
        }

        .process-label {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .process-desc {
            font-size: 0.85rem;
            color: #666;
        }

        .arrow {
            font-size: 2rem;
            color: #ccc;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .steps-grid {
                grid-template-columns: 1fr;
            }

            .detail-panel {
                padding: 20px;
            }

            .arrow {
                transform: rotate(90deg);
            }
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background: #f0f0f0;
        }

        .tab-button.active {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const stepsData = [
            {
                id: 1,
                title: "법적 문서 준비 및 검토",
                description: "전문 변호사와 함께 필수 법적 문서 작성",
                documents: [
                    {
                        name: "개인정보 처리 위탁 계약서",
                        content: "당사(수탁자)와 고객사(위탁자) 간의 의무와 책임 명시",
                        law: "개인정보보호법 제26조 필수 준수",
                        sample: `[개인정보 처리 위탁 계약서 샘플]

제1조 (목적)
본 계약은 위탁자가 수탁자에게 개인정보 처리업무를 위탁함에 있어
개인정보보호법 제26조에 따른 양 당사자의 의무와 책임을 규정함을 목적으로 한다.

제2조 (위탁업무의 목적 및 범위)
① 위탁업무: MES/ERP 솔루션 제공 및 시스템 유지보수
② 위탁받는 개인정보 항목: 직원정보(성명, 연락처, 부서)
③ 보유 및 이용기간: 계약 종료 시까지

제3조 (목적 외 이용 금지)
수탁자는 위탁받은 개인정보를 제2조에서 정한 범위를 초과하여
이용하거나 제3자에게 제공해서는 안 된다.

제4조 (안전성 확보 조치)
① 접근 통제 장치 운영
② 개인정보 암호화
③ 접근 기록 보관 및 점검
④ 보안프로그램 설치 및 갱신`,
                        links: [
                            { text: "개인정보보호위원회 - 위탁 계약서 가이드", url: "https://www.pipc.go.kr" },
                            { text: "표준 개인정보 위탁계약서 다운로드", url: "https://www.pipc.go.kr/np/default/page.do?mCode=D010030000" }
                        ]
                    },
                    {
                        name: "영업비밀 보호 약정",
                        content: "고객사의 핵심 기밀 데이터 보호 대상 명시",
                        law: "부정경쟁방지법",
                        sample: `[영업비밀 보호 약정서 샘플]

제1조 (영업비밀의 정의)
본 계약에서 "영업비밀"이란 다음 각호의 정보를 의미한다:
1. 생산, 제조, 판매에 관한 정보
2. 매출, 원가, 수익 등 재무 정보
3. 고객 리스트 및 거래 정보
4. 생산 계획 및 공정 정보

제2조 (비밀유지 의무)
수탁자는 영업비밀을 제3자에게 공개, 누설하거나
계약 목적 외로 사용하여서는 안 된다.

제3조 (의무 기간)
비밀유지 의무는 계약 종료 후에도 영구히 유효하다.

제4조 (손해배상)
수탁자가 본 약정을 위반하여 위탁자에게 손해를 발생시킨 경우,
그 손해를 배상할 책임을 진다.`,
                        links: [
                            { text: "특허청 - 영업비밀 보호 가이드", url: "https://www.kipo.go.kr" },
                            { text: "한국지식재산보호원", url: "https://www.koipa.re.kr" }
                        ]
                    },
                    {
                        name: "서비스 이용 약관",
                        content: "솔루션 사용 조건, 데이터 소유권, SLA 기준 명시",
                        law: "약관법, 클라우드법",
                        sample: `[서비스 이용 약관 샘플]

제1조 (목적)
본 약관은 Code Bridge X(이하 "회사")가 제공하는
MES/ERP SaaS 서비스의 이용과 관련한 권리, 의무 및
책임사항을 규정함을 목적으로 합니다.

제2조 (데이터 소유권)
① 고객이 입력한 모든 데이터의 소유권은 고객에게 있습니다.
② 회사는 고객 데이터를 계약 목적 외로 사용할 수 없습니다.

제3조 (서비스 수준 협약, SLA)
① 서비스 가용률: 99.5% 이상
② 장애 대응 시간: 1시간 이내 1차 대응
③ 데이터 백업: 일 1회 자동 백업

제4조 (서비스 제한)
회사는 다음의 경우 서비스를 제한할 수 있습니다:
1. 요금 미납
2. 불법적 사용
3. 시스템 부하 과다`,
                        links: [
                            { text: "공정거래위원회 - 표준약관", url: "https://www.ftc.go.kr" }
                        ]
                    },
                    {
                        name: "개인정보 처리 방침",
                        content: "위탁 업무 내용, 수탁자 명칭 공개",
                        law: "개인정보보호법 고지 의무",
                        sample: `[개인정보 처리방침 - 위탁 부분]

4. 개인정보의 처리 위탁

회사는 서비스 제공을 위해 다음과 같이 개인정보 처리업무를
외부 전문업체에 위탁하고 있습니다.

① 수탁업체: (주)Code Bridge X
② 위탁업무: MES/ERP 시스템 운영 및 유지보수
③ 위탁하는 개인정보 항목: 
   - 임직원 정보(성명, 부서, 연락처)
   - 생산관리 정보
④ 보유 및 이용기간: 서비스 제공 기간

회사는 위탁계약 체결 시 개인정보보호법 제26조에 따라
위탁업무 수행목적 외 개인정보 처리금지, 기술적·관리적
보호조치, 재위탁 제한 등을 문서로 명시하고 있습니다.`,
                        links: [
                            { text: "개인정보보호 포털", url: "https://www.privacy.go.kr" }
                        ]
                    }
                ],
                checklist: [
                    "법무법인과 계약서 검토 완료",
                    "모든 필수 조항 포함 확인",
                    "최신 법령 반영 여부 검토",
                    "계약서 2부 작성 (쌍방 보관)"
                ]
            },
            {
                id: 2,
                title: "고객사 동의/서명 받기",
                description: "법적 효력을 갖춘 동의 절차 확립",
                timeline: [
                    { stage: "계약 체결 시", tasks: ["위탁 계약서 서면/전자 서명", "영업비밀 보호 약정 서명", "법정 필수 조항 확인"] },
                    { stage: "솔루션 최초 이용 시", tasks: ["체크박스를 통한 전자 동의", "필수 동의 사항 구분", "IP 주소 및 동의 시점 기록"] }
                ],
                sample: `[전자 동의 화면 구현 샘플]

// React 컴포넌트 예시
function ConsentForm() {
    const [consents, setConsents] = useState({
        terms: false,
        privacy: false,
        delegation: false
    });

    const handleSubmit = async () => {
        const consentRecord = {
            userId: currentUser.id,
            consents: consents,
            ipAddress: await getClientIP(),
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent
        };
        
        // 동의 기록 저장
        await saveConsent(consentRecord);
    };

    return (
        <div>
            <h2>서비스 이용을 위한 약관 동의</h2>
            
            <Checkbox required
                checked={consents.terms}
                onChange={(e) => setConsents({...consents, terms: e.target.checked})}>
                [필수] 서비스 이용약관 동의
                <a href="/terms">전문보기</a>
            </Checkbox>

            <Checkbox required
                checked={consents.privacy}
                onChange={(e) => setConsents({...consents, privacy: e.target.checked})}>
                [필수] 개인정보 처리방침 동의
                <a href="/privacy">전문보기</a>
            </Checkbox>

            <Checkbox required
                checked={consents.delegation}
                onChange={(e) => setConsents({...consents, delegation: e.target.checked})}>
                [필수] 개인정보 처리 위탁 동의
                <a href="/delegation">전문보기</a>
            </Checkbox>

            <button disabled={!allRequired} onClick={handleSubmit}>
                동의하고 시작하기
            </button>
        </div>
    );
}`,
                links: [
                    { text: "전자서명법 - 법제처", url: "https://www.law.go.kr" },
                    { text: "한국인터넷진흥원 - 전자 동의 가이드", url: "https://www.kisa.or.kr" }
                ],
                checklist: [
                    "모든 계약서에 서명 날인 완료",
                    "전자 동의 시스템 구축",
                    "동의 기록 암호화 저장",
                    "IP 주소 및 타임스탬프 기록"
                ]
            },
            {
                id: 3,
                title: "내부 인력 관리 체계 구축",
                description: "직원 보안 교육 및 접근 권한 관리",
                measures: [
                    {
                        target: "모든 직원",
                        action: "내부 보안 서약서 징구",
                        details: ["고객 데이터 기밀 유지", "업무 외 이용 금지", "퇴사 후 비밀 유지 기간 명시"],
                        sample: `[내부 보안 서약서 샘플]

보 안 서 약 서

본인은 Code Bridge X에 재직하는 동안 및 퇴사 후에도
다음 사항을 준수할 것을 서약합니다:

1. 고객 데이터 기밀 유지
   - 고객사의 모든 데이터를 기밀로 유지
   - 제3자에게 공개, 누설, 제공 금지

2. 업무 외 이용 금지
   - 업무 목적 외 고객 데이터 접근 금지
   - 개인적 용도로 활용 금지

3. 퇴사 후 의무
   - 퇴사 후에도 영구적 비밀 유지
   - 회사 자료 일체 반납

4. 위반 시 책임
   - 민·형사상 책임
   - 손해배상 책임

서약일: 2025년 __ 월 __ 일
서약자: _________ (인)`
                    },
                    {
                        target: "개인정보 취급자",
                        action: "정기 보안 교육",
                        details: ["개인정보보호법 교육", "영업비밀보호법 교육", "매년 1회 이상 실시"],
                        sample: `[보안 교육 커리큘럼]

1. 개인정보보호법 교육 (연 1회 필수)
   - 개인정보의 정의 및 범위
   - 개인정보 처리 원칙
   - 위탁 시 준수사항
   - 위반 시 처벌 규정

2. 영업비밀보호법 교육
   - 영업비밀의 정의
   - 비밀 관리 방법
   - 부정경쟁행위 금지
   - 손해배상 및 형사처벌

3. 실무 교육
   - DB 접근 시 주의사항
   - 로그 기록의 중요성
   - 사회공학 공격 대응
   - 사고 발생 시 대응 절차

교육 이수 확인: 서명부 작성 및 보관 (3년)`
                    },
                    {
                        target: "DB 접근 권한",
                        action: "역할 기반 접근 통제(RBAC)",
                        details: ["필요 최소 인원에게만", "최소 권한 원칙 적용", "접근 권한 관리 대장 작성"],
                        sample: `[DB 접근 권한 관리 대장]

| 사번 | 이름 | 부서 | 역할 | 접근 DB | 권한 수준 | 승인자 | 승인일 | 만료일 |
|------|------|------|------|---------|----------|--------|--------|--------|
| E001 | 김개발 | 개발팀 | 개발자 | 개발DB | READ/WRITE | CTO | 2025-01-01 | 2025-12-31 |
| E002 | 이운영 | 운영팀 | 엔지니어 | 운영DB | READ | CISO | 2025-01-01 | 2025-06-30 |
| E003 | 박관리 | 운영팀 | 관리자 | 전체 | ADMIN | CEO | 2025-01-01 | 무기한 |

권한 발급 절차:
1. 직원이 업무 필요성 기재하여 신청
2. 팀장 1차 승인
3. CISO(보안책임자) 최종 승인
4. 시스템에 권한 등록
5. 권한 관리 대장 기록

권한 회수 사유:
- 프로젝트 종료
- 부서 이동
- 퇴사
- 권한 남용 적발`
                    }
                ],
                links: [
                    { text: "개인정보보호위원회 - 교육자료", url: "https://www.pipc.go.kr/np/education/educationList.do" },
                    { text: "한국인터넷진흥원 - 정보보호 교육", url: "https://www.kisa.or.kr/main.jsp" }
                ],
                checklist: [
                    "전 직원 보안 서약서 징구 완료",
                    "개인정보 취급자 교육 이수 확인",
                    "DB 접근 권한 최소화 적용",
                    "권한 관리 대장 작성 및 분기별 점검"
                ]
            },
            {
                id: 4,
                title: "기술적 통제 시스템 구축",
                description: "시스템 레벨의 보안 장치 구현",
                systems: [
                    {
                        name: "DB 접근 통제 시스템",
                        features: ["MFA 다중 인증", "권한 자동 회수", "접근 승인 기간 관리"],
                        sample: `// MFA 인증 시스템 구현 예시
class DatabaseAccessControl {
    async requestAccess(userId, database, reason) {
        // 1. 1차 인증: 비밀번호
        const passwordValid = await verifyPassword(userId);
        if (!passwordValid) throw new Error('Invalid password');

        // 2. 2차 인증: OTP 또는 인증 앱
        const otpCode = await requestOTP(userId);
        const otpValid = await verifyOTP(userId, otpCode);
        if (!otpValid) throw new Error('Invalid OTP');

        // 3. 접근 승인 요청 생성
        const accessRequest = {
            userId,
            database,
            reason,
            requestedAt: new Date(),
            expiresAt: new Date(Date.now() + 4 * 60 * 60 * 1000), // 4시간
            status: 'pending'
        };

        // 4. 보안 책임자에게 알림
        await notifyCISO(accessRequest);

        return accessRequest;
    }

    // 자동 권한 회수
    async autoRevokeExpiredAccess() {
        const expiredAccess = await db.access.findMany({
            where: { expiresAt: { lt: new Date() } }
        });

        for (const access of expiredAccess) {
            await revokeAccess(access.userId, access.database);
            await logRevocation(access);
        }
    }
}`
                    },
                    {
                        name: "Audit Log 시스템",
                        features: ["상세 접근 기록", "로그 위변조 방지", "최소 2년 보존"],
                        sample: `// Audit Log 시스템 구현
class AuditLogger {
    async logAccess(accessInfo) {
        const logEntry = {
            id: generateUUID(),
            timestamp: new Date().toISOString(),
            userId: accessInfo.userId,
            userName: accessInfo.userName,
            clientName: accessInfo.clientName,
            database: accessInfo.database,
            action: accessInfo.action, // SELECT, INSERT, UPDATE, DELETE
            query: accessInfo.query,
            affectedRows: accessInfo.affectedRows,
            ipAddress: accessInfo.ipAddress,
            reason: accessInfo.reason,
            approvedBy: accessInfo.approvedBy
        };

        // 로그 암호화
        const encryptedLog = await encrypt(JSON.stringify(logEntry));

        // 해시 생성 (위변조 방지)
        const hash = await generateHash(encryptedLog);

        // 별도 보안 로그 DB에 저장
        await secureLogDB.insert({
            ...logEntry,
            encrypted: encryptedLog,
            hash: hash
        });

        // 실시간 모니터링 시스템에 전송
        await sendToMonitoring(logEntry);
    }

    // 로그 무결성 검증
    async verifyLogIntegrity(logId) {
        const log = await secureLogDB.findById(logId);
        const currentHash = await generateHash(log.encrypted);
        
        return currentHash === log.hash;
    }
}`
                    },
                    {
                        name: "테넌시 격리",
                        features: ["고객사별 데이터 완벽 분리", "상호 접근 불가 설계"],
                        sample: `// 멀티테넌시 격리 구현
class TenantIsolation {
    // 1. 스키마 격리 방식
    async queryWithTenantIsolation(tenantId, query) {
        // 자동으로 tenant_id 필터 추가
        const isolatedQuery = {
            ...query,
            where: {
                ...query.where,
                tenant_id: tenantId
            }
        };

        return await db.execute(isolatedQuery);
    }

    // 2. 데이터베이스 격리 방식
    async getClientDatabase(clientId) {
        const dbConfig = await getClientDBConfig(clientId);
        return createConnection({
            host: dbConfig.host,
            database: \`client_\${clientId}\`,
            user: dbConfig.user,
            password: dbConfig.password
        });
    }

    // 3. Row Level Security (PostgreSQL)
    async setupRowLevelSecurity() {
        await db.execute(\`
            ALTER TABLE production_data ENABLE ROW LEVEL SECURITY;
            
            CREATE POLICY tenant_isolation_policy ON production_data
            USING (tenant_id = current_setting('app.current_tenant')::int);
        \`);
    }
}`
                    },
                    {
                        name: "데이터 암호화",
                        features: ["민감 정보 암호화", "핵심 재무 데이터 보호"],
                        sample: `// 데이터 암호화 구현
const crypto = require('crypto');

class DataEncryption {
    constructor() {
        this.algorithm = 'aes-256-gcm';
        this.key = process.env.ENCRYPTION_KEY; // 환경변수에서 로드
    }

    // 민감 데이터 암호화
    encrypt(text) {
        const iv = crypto.randomBytes(16);
        const cipher = crypto.createCipheriv(this.algorithm, this.key, iv);
        
        let encrypted = cipher.update(text, 'utf8', 'hex');
        encrypted += cipher.final('hex');
        
        const authTag = cipher.getAuthTag();
        
        return {
            encrypted,
            iv: iv.toString('hex'),
            authTag: authTag.toString('hex')
        };
    }

    // 복호화
    decrypt(encryptedData) {
        const decipher = crypto.createDecipheriv(
            this.algorithm, 
            this.key, 
            Buffer.from(encryptedData.iv, 'hex')
        );
        
        decipher.setAuthTag(Buffer.from(encryptedData.authTag, 'hex'));
        
        let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
        decrypted += decipher.final('utf8');
        
        return decrypted;
    }

    // DB 저장 전 자동 암호화
    async beforeSave(entity) {
        const sensitiveFields = ['salary', 'revenue', 'cost', 'ssn'];
        
        for (const field of sensitiveFields) {
            if (entity[field]) {
                entity[\`\${field}_encrypted\`] = this.encrypt(entity[field].toString());
                delete entity[field]; // 원본 삭제
            }
        }
        
        return entity;
    }
}`
                    }
                ],
                links: [
                    { text: "KISA - 개인정보 안전성 확보조치 기준 해설서", url: "https://www.kisa.or.kr/2060204/form?postSeq=12&lang_type=KO" },
                    { text: "클라우드 보안 인증(CSAP)", url: "https://www.csap.or.kr" }
                ],
                checklist: [
                    "MFA 인증 시스템 구축",
                    "Audit Log 시스템 구현 및 테스트",
                    "테넌시 격리 설계 완료",
                    "암호화 알고리즘 적용 및 키 관리"
                ]
            },
            {
                id: 5,
                title: "유지보수 접근 승인 프로세스",
                description: "명확한 접근 통제 절차 수립",
                process: [
                    { step: 1, name: "요청", desc: "운영팀이 접근 사유, 고객사, 예상 시간 기록" },
                    { step: 2, name: "승인", desc: "보안 책임자가 정당성 확인 후 승인" },
                    { step: 3, name: "실행", desc: "토큰과 MFA로 접속, Audit Log 기록" }
                ],
                sample: `// 유지보수 접근 승인 시스템
class MaintenanceAccessSystem {
    // 1단계: 접근 요청
    async requestAccess(request) {
        const accessRequest = {
            id: generateUUID(),
            requesterId: request.userId,
            requesterName: request.userName,
            clientId: request.clientId,
            clientName: request.clientName,
            reason: request.reason,
            estimatedDuration: request.duration, // 분 단위
            requestedAt: new Date(),
            status: 'pending',
            approver: null,
            approvedAt: null
        };

        // DB에 요청 저장
        await db.accessRequests.create(accessRequest);

        // 보안 책임자에게 알림
        await this.notifyApprover(accessRequest);

        return accessRequest;
    }

    // 2단계: 승인
    async approveAccess(requestId, approverId) {
        const request = await db.accessRequests.findById(requestId);

        // 승인자 권한 확인
        const approver = await db.users.findById(approverId);
        if (!approver.roles.includes('CISO') && !approver.roles.includes('CTO')) {
            throw new Error('승인 권한이 없습니다');
        }

        // 접근 토큰 생성 (한시적)
        const accessToken = await this.generateAccessToken({
            userId: request.requesterId,
            clientId: request.clientId,
            expiresIn: request.estimatedDuration * 60 // 초 단위
        });

        // 승인 처리
        await db.accessRequests.update(requestId, {
            status: 'approved',
            approver: approverId,
            approvedAt: new Date(),
            accessToken: accessToken
        });

        // 요청자에게 토큰 전달
        await this.sendAccessToken(request.requesterId, accessToken);

        return accessToken;
    }

    // 3단계: 접근 실행
    async executeAccess(accessToken, action) {
        // 토큰 검증
        const tokenData = await this.verifyToken(accessToken);
        if (!tokenData.valid) {
            throw new Error('유효하지 않은 토큰입니다');
        }

        // MFA 재확인
        await this.verifyMFA(tokenData.userId);

        // 접근 로그 기록
        await auditLogger.logAccess({
            userId: tokenData.userId,
            clientId: tokenData.clientId,
            action: action.type,
            query: action.query,
            timestamp: new Date(),
            ipAddress: action.ipAddress
        });

        // 실시간 알림 (고객사)
        await this.notifyClient({
            clientId: tokenData.clientId,
            message: \`시스템 관리자가 데이터베이스에 접근했습니다.\`,
            timestamp: new Date()
        });

        // 작업 실행
        return await db.execute(action.query);
    }

    // 토큰 자동 만료
    async autoExpireTokens() {
        const expiredTokens = await db.accessRequests.findMany({
            where: { 
                status: 'approved',
                approvedAt: { lt: new Date(Date.now() - 4 * 60 * 60 * 1000) }
            }
        });

        for (const request of expiredTokens) {
            await this.revokeAccess(request.id);
        }
    }
}`,
                links: [
                    { text: "정보통신망법 - 접근 통제 규정", url: "https://www.law.go.kr" }
                ],
                checklist: [
                    "접근 요청 시스템 구축",
                    "승인 프로세스 정의 및 자동화",
                    "한시적 토큰 발급 시스템 구현",
                    "접근 기록 자동 로깅"
                ]
            },
            {
                id: 6,
                title: "고객 투명성 제공 (UX/UI)",
                description: "고객이 직접 확인할 수 있는 투명한 시스템",
                features: [
                    {
                        name: "보안 센터 메뉴",
                        desc: "운영자 활동 기록(Audit Log) 공개",
                        sample: `// 고객용 보안 센터 UI
function SecurityCenter() {
    const [auditLogs, setAuditLogs] = useState([]);
    const [filter, setFilter] = useState({ startDate: null, endDate: null });

    useEffect(() => {
        fetchAuditLogs();
    }, [filter]);

    const fetchAuditLogs = async () => {
        const response = await api.get('/security/audit-logs', {
            params: {
                clientId: currentClient.id,
                startDate: filter.startDate,
                endDate: filter.endDate
            }
        });
        setAuditLogs(response.data);
    };

    return (
        <div className="security-center">
            <h1>보안 센터</h1>
            
            <div className="filters">
                <DatePicker 
                    label="시작일"
                    value={filter.startDate}
                    onChange={(date) => setFilter({...filter, startDate: date})}
                />
                <DatePicker 
                    label="종료일"
                    value={filter.endDate}
                    onChange={(date) => setFilter({...filter, endDate: date})}
                />
            </div>

            <table className="audit-log-table">
                <thead>
                    <tr>
                        <th>일시</th>
                        <th>작업자</th>
                        <th>작업 유형</th>
                        <th>접근 사유</th>
                        <th>IP 주소</th>
                        <th>승인자</th>
                    </tr>
                </thead>
                <tbody>
                    {auditLogs.map(log => (
                        <tr key={log.id}>
                            <td>{formatDateTime(log.timestamp)}</td>
                            <td>{log.userName}</td>
                            <td>{log.action}</td>
                            <td>{log.reason}</td>
                            <td>{log.ipAddress}</td>
                            <td>{log.approvedBy}</td>
                        </tr>
                    ))}
                </tbody>
            </table>

            <button onClick={() => exportToExcel(auditLogs)}>
                Excel로 다운로드
            </button>
        </div>
    );
}`
                    },
                    {
                        name: "실시간 알림",
                        desc: "DB 접근 시작/종료 시점 즉시 고지",
                        sample: `// 실시간 알림 시스템
class RealtimeNotification {
    // 이메일 알림
    async sendEmailNotification(clientId, event) {
        const client = await db.clients.findById(clientId);
        const admins = await db.users.findMany({
            where: { clientId, role: 'admin' }
        });

        const emailContent = {
            subject: \`[보안 알림] 시스템 접근 \${event.type === 'start' ? '시작' : '종료'}\`,
            html: \`
                <h2>시스템 접근 알림</h2>
                <p><strong>일시:</strong> \${event.timestamp}</p>
                <p><strong>작업자:</strong> \${event.userName}</p>
                <p><strong>접근 유형:</strong> \${event.type}</p>
                <p><strong>사유:</strong> \${event.reason}</p>
                <p><strong>IP 주소:</strong> \${event.ipAddress}</p>
                
                <p>자세한 내용은 <a href="https://your-domain.com/security">보안 센터</a>에서 확인하세요.</p>
            \`
        };

        for (const admin of admins) {
            await emailService.send(admin.email, emailContent);
        }
    }

    // 앱 내 알림
    async sendInAppNotification(clientId, event) {
        const notification = {
            clientId,
            type: 'security_access',
            title: '시스템 접근 알림',
            message: \`\${event.userName}님이 데이터베이스에 접근했습니다.\`,
            data: event,
            createdAt: new Date(),
            read: false
        };

        await db.notifications.create(notification);

        // WebSocket으로 실시간 푸시
        await websocket.emit(\`client:\${clientId}\`, {
            type: 'notification',
            data: notification
        });
    }

    // SMS 알림 (옵션)
    async sendSMSNotification(clientId, event) {
        const client = await db.clients.findById(clientId);
        
        if (client.smsNotificationEnabled) {
            const message = \`[보안알림] \${event.userName}님이 시스템에 접근했습니다. \${event.timestamp}\`;
            await smsService.send(client.adminPhone, message);
        }
    }
}`
                    },
                    {
                        name: "데이터 파기 기능",
                        desc: "계약 종료 시 직접 파기 요청 및 확인서 발급",
                        sample: `// 데이터 파기 요청 시스템
function DataDeletionRequest() {
    const [deletionRequest, setDeletionRequest] = useState(null);
    const [confirmDialog, setConfirmDialog] = useState(false);

    const requestDeletion = async () => {
        const request = {
            clientId: currentClient.id,
            requestedBy: currentUser.id,
            requestedAt: new Date(),
            reason: '계약 종료',
            status: 'pending'
        };

        const response = await api.post('/data-deletion/request', request);
        setDeletionRequest(response.data);
    };

    const confirmDeletion = async () => {
        // 최종 확인
        await api.post(\`/data-deletion/\${deletionRequest.id}/confirm\`);
        
        // 파기 프로세스 시작
        const deletion = await api.post(\`/data-deletion/\${deletionRequest.id}/execute\`);
        
        // 파기 완료 후 확인서 다운로드
        if (deletion.status === 'completed') {
            await downloadDeletionCertificate(deletion.certificateId);
        }
    };

    return (
        <div className="data-deletion">
            <h2>데이터 파기 요청</h2>
            
            <div className="warning-box">
                <strong>⚠️ 주의사항</strong>
                <ul>
                    <li>파기 완료 후 데이터 복구가 불가능합니다.</li>
                    <li>파기 대상: 모든 생산 데이터, 백업 데이터</li>
                    <li>파기 소요 시간: 최대 7영업일</li>
                </ul>
            </div>

            <button onClick={() => setConfirmDialog(true)}>
                데이터 파기 요청
            </button>

            {confirmDialog && (
                <Dialog>
                    <h3>정말로 모든 데이터를 파기하시겠습니까?</h3>
                    <p>이 작업은 되돌릴 수 없습니다.</p>
                    <input 
                        type="text" 
                        placeholder="'파기 동의'를 입력하세요"
                        onChange={(e) => setConfirmText(e.target.value)}
                    />
                    <button 
                        disabled={confirmText !== '파기 동의'}
                        onClick={confirmDeletion}>
                        최종 확인 및 파기
                    </button>
                </Dialog>
            )}
        </div>
    );
}

// 백엔드 파기 프로세스
class DataDeletionService {
    async executeDeletion(requestId) {
        const request = await db.deletionRequests.findById(requestId);
        
        // 1. 운영 DB 데이터 삭제
        await this.deleteProductionData(request.clientId);
        
        // 2. 백업 데이터 삭제
        await this.deleteBackupData(request.clientId);
        
        // 3. 로그 데이터 익명화 (감사 목적으로 보존)
        await this.anonymizeAuditLogs(request.clientId);
        
        // 4. 파기 완료 인증서 생성
        const certificate = await this.generateCertificate(request);
        
        // 5. 고객에게 이메일 발송
        await this.sendDeletionConfirmation(request.clientId, certificate);
        
        return certificate;
    }

    async generateCertificate(request) {
        return {
            id: generateUUID(),
            clientId: request.clientId,
            requestId: request.id,
            deletedAt: new Date(),
            deletedBy: request.requestedBy,
            dataTypes: ['production_data', 'backups', 'user_files'],
            verificationHash: await this.generateVerificationHash(request)
        };
    }
}`
                    }
                ],
                links: [
                    { text: "클라우드 서비스 이용자 보호 가이드", url: "https://www.kisa.or.kr" }
                ],
                checklist: [
                    "보안 센터 UI 구현",
                    "실시간 알림 시스템 구축",
                    "데이터 파기 프로세스 정의",
                    "파기 확인서 자동 발급"
                ]
            },
            {
                id: 7,
                title: "정기 감사 및 모니터링",
                description: "지속적인 보안 수준 유지",
                schedule: [
                    {
                        frequency: "월 1회 이상",
                        activity: "접근 로그 감사",
                        responsible: "내부 감사팀 또는 보안 담당자",
                        sample: `// 월간 보안 감사 리포트 생성
class MonthlySecurityAudit {
    async generateReport(month, year) {
        const report = {
            period: \`\${year}-\${month}\`,
            generatedAt: new Date(),
            summary: {},
            findings: [],
            recommendations: []
        };

        // 1. 접근 로그 분석
        const accessStats = await this.analyzeAccessLogs(month, year);
        report.summary.totalAccess = accessStats.total;
        report.summary.byUser = accessStats.byUser;
        report.summary.byClient = accessStats.byClient;

        // 2. 비정상 접근 패턴 탐지
        const anomalies = await this.detectAnomalies(month, year);
        if (anomalies.length > 0) {
            report.findings.push({
                severity: 'high',
                type: 'anomaly_detected',
                details: anomalies
            });
        }

        // 3. 목적 외 이용 시도 검사
        const unauthorizedAttempts = await this.checkUnauthorizedAccess(month, year);
        if (unauthorizedAttempts.length > 0) {
            report.findings.push({
                severity: 'critical',
                type: 'unauthorized_attempt',
                details: unauthorizedAttempts
            });
        }

        // 4. 권한 남용 검사
        const privilegeAbuse = await this.checkPrivilegeAbuse(month, year);
        if (privilegeAbuse.length > 0) {
            report.findings.push({
                severity: 'high',
                type: 'privilege_abuse',
                details: privilegeAbuse
            });
        }

        // 5. 권장사항 생성
        report.recommendations = await this.generateRecommendations(report.findings);

        // 6. 리포트 저장 및 배포
        await db.auditReports.create(report);
        await this.distributeReport(report);

        return report;
    }

    async detectAnomalies(month, year) {
        const logs = await db.auditLogs.findMany({
            where: {
                timestamp: {
                    gte: new Date(year, month - 1, 1),
                    lt: new Date(year, month, 1)
                }
            }
        });

        const anomalies = [];

        // 비정상적인 시간대 접근
        const nightAccess = logs.filter(log => {
            const hour = new Date(log.timestamp).getHours();
            return hour < 6 || hour > 22;
        });

        if (nightAccess.length > 0) {
            anomalies.push({
                type: 'unusual_time',
                count: nightAccess.length,
                details: nightAccess
            });
        }

        // 대량 데이터 조회
        const bulkQueries = logs.filter(log => log.affectedRows > 10000);
        if (bulkQueries.length > 0) {
            anomalies.push({
                type: 'bulk_query',
                count: bulkQueries.length,
                details: bulkQueries
            });
        }

        return anomalies;
    }
}`
                    },
                    {
                        frequency: "분기 1회 이상",
                        activity: "취급자 권한 점검",
                        responsible: "보안 담당자",
                        sample: `// 분기별 권한 점검
class QuarterlyAccessReview {
    async reviewAccess(quarter, year) {
        const report = {
            quarter: \`Q\${quarter} \${year}\`,
            reviewedAt: new Date(),
            totalUsers: 0,
            reviewedUsers: 0,
            revokedAccess: [],
            recommendations: []
        };

        // 1. 모든 권한 보유자 조회
        const usersWithAccess = await db.users.findMany({
            where: { hasDBAccess: true }
        });

        report.totalUsers = usersWithAccess.length;

        for (const user of usersWithAccess) {
            // 2. 현재 프로젝트/역할 확인
            const currentRole = await this.getCurrentRole(user.id);
            const requiredAccess = await this.getRequiredAccess(currentRole);

            // 3. 불필요한 권한 확인
            const unnecessaryAccess = await this.checkUnnecessaryAccess(
                user.id, 
                requiredAccess
            );

            if (unnecessaryAccess.length > 0) {
                // 권한 회수
                for (const access of unnecessaryAccess) {
                    await this.revokeAccess(user.id, access);
                    report.revokedAccess.push({
                        userId: user.id,
                        userName: user.name,
                        access: access,
                        reason: '업무 종료로 인한 불필요한 권한'
                    });
                }
            }

            // 4. 미사용 권한 확인
            const unusedAccess = await this.checkUnusedAccess(user.id, 90); // 90일
            if (unusedAccess.length > 0) {
                report.recommendations.push({
                    userId: user.id,
                    userName: user.name,
                    type: 'unused_access',
                    details: unusedAccess,
                    suggestion: '90일 이상 미사용 권한 회수 검토'
                });
            }

            report.reviewedUsers++;
        }

        // 5. 리포트 저장 및 배포
        await db.accessReviewReports.create(report);
        await this.notifySecurityTeam(report);

        return report;
    }
}`
                    },
                    {
                        frequency: "연 1회 이상",
                        activity: "계약/보안 체계 재검토",
                        responsible: "경영진 및 보안 담당자",
                        sample: `// 연간 보안 체계 재검토
class AnnualSecurityReview {
    async conductReview(year) {
        const review = {
            year,
            reviewDate: new Date(),
            legalCompliance: {},
            systemSecurity: {},
            processEffectiveness: {},
            recommendations: []
        };

        // 1. 법령 개정사항 확인
        review.legalCompliance = await this.checkLegalUpdates(year);
        
        // 2. 계약서 재검토
        const contractIssues = await this.reviewContracts();
        if (contractIssues.length > 0) {
            review.recommendations.push({
                priority: 'high',
                category: 'legal',
                items: contractIssues
            });
        }

        // 3. 기술적 보안 평가
        review.systemSecurity = await this.assessSystemSecurity();

        // 4. 프로세스 효과성 평가
        review.processEffectiveness = await this.evaluateProcesses();

        // 5. 침해사고 이력 검토
        const incidents = await this.reviewIncidents(year);
        review.incidents = incidents;

        // 6. 개선 계획 수립
        review.improvementPlan = await this.createImprovementPlan(review);

        // 7. 경영진 보고
        await this.presentToManagement(review);

        return review;
    }

    async checkLegalUpdates(year) {
        return {
            personalInfoLaw: {
                lastUpdated: new Date('2024-09-15'),
                changes: ['제59조 과징금 부과 기준 강화'],
                actionRequired: '위탁계약서 조항 검토 필요'
            },
            tradeSecretLaw: {
                lastUpdated: new Date('2024-07-01'),
                changes: ['제14조의5 손해배상액 추정 규정 신설'],
                actionRequired: '영업비밀 보호 약정 갱신'
            }
        };
    }
}`
                    }
                ],
                links: [
                    { text: "ISMS-P 인증 가이드", url: "https://isms.kisa.or.kr" },
                    { text: "정보보호 및 개인정보보호 관리체계 인증", url: "https://isms.kisa.or.kr/main/ispims/intro/" }
                ],
                checklist: [
                    "월간 감사 리포트 자동 생성",
                    "분기별 권한 점검 실시",
                    "연간 법령 개정사항 검토",
                    "보안 체계 개선 계획 수립"
                ]
            }
        ];

        function App() {
            const [selectedStep, setSelectedStep] = useState(stepsData[0]);
            const [activeTab, setActiveTab] = useState('overview');

            return (
                <div className="container">
                    <div className="header">
                        <h1>🔒 MES/ERP SaaS 법적 안전성 확보 가이드</h1>
                        <p>7단계 프로세스 · 실무 샘플 · 관련 링크</p>
                    </div>

                    <div className="steps-grid">
                        {stepsData.map(step => (
                            <div 
                                key={step.id}
                                className={`step-card ${selectedStep.id === step.id ? 'active' : ''}`}
                                onClick={() => {
                                    setSelectedStep(step);
                                    setActiveTab('overview');
                                }}
                            >
                                <div className="step-number">{step.id}</div>
                                <div className="step-title">{step.title}</div>
                                <div className="step-description">{step.description}</div>
                            </div>
                        ))}
                    </div>

                    <div className="detail-panel">
                        <h2>
                            <span className="step-number">{selectedStep.id}</span>
                            {selectedStep.title}
                        </h2>

                        <div className="tab-buttons">
                            <button 
                                className={`tab-button ${activeTab === 'overview' ? 'active' : ''}`}
                                onClick={() => setActiveTab('overview')}
                            >
                                📋 개요
                            </button>
                            <button 
                                className={`tab-button ${activeTab === 'sample' ? 'active' : ''}`}
                                onClick={() => setActiveTab('sample')}
                            >
                                📄 샘플 문서
                            </button>
                            <button 
                                className={`tab-button ${activeTab === 'links' ? 'active' : ''}`}
                                onClick={() => setActiveTab('links')}
                            >
                                🔗 참고 링크
                            </button>
                        </div>

                        {activeTab === 'overview' && (
                            <div>
                                {selectedStep.documents && (
                                    <div className="detail-section">
                                        <h3>필수 문서</h3>
                                        <div className="document-grid">
                                            {selectedStep.documents.map((doc, idx) => (
                                                <div key={idx} className="document-card">
                                                    <h4>{doc.name}</h4>
                                                    <p>{doc.content}</p>
                                                    <div className="law-reference">⚖️ {doc.law}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {selectedStep.timeline && (
                                    <div className="detail-section">
                                        <h3>진행 단계</h3>
                                        {selectedStep.timeline.map((stage, idx) => (
                                            <div key={idx} className="document-card">
                                                <h4>{stage.stage}</h4>
                                                <ul>
                                                    {stage.tasks.map((task, tidx) => (
                                                        <li key={tidx}>{task}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedStep.measures && (
                                    <div className="detail-section">
                                        <h3>조치 내용</h3>
                                        {selectedStep.measures.map((measure, idx) => (
                                            <div key={idx} className="document-card">
                                                <h4>{measure.target}</h4>
                                                <p><strong>{measure.action}</strong></p>
                                                <ul>
                                                    {measure.details.map((detail, didx) => (
                                                        <li key={didx}>{detail}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedStep.systems && (
                                    <div className="detail-section">
                                        <h3>구축 시스템</h3>
                                        {selectedStep.systems.map((system, idx) => (
                                            <div key={idx} className="document-card">
                                                <h4>{system.name}</h4>
                                                <ul>
                                                    {system.features.map((feature, fidx) => (
                                                        <li key={fidx}>{feature}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedStep.process && (
                                    <div className="detail-section">
                                        <h3>프로세스 흐름</h3>
                                        <div className="process-flow">
                                            {selectedStep.process.map((proc, idx) => (
                                                <React.Fragment key={idx}>
                                                    <div className="process-step">
                                                        <div className="process-circle">{proc.step}</div>
                                                        <div className="process-label">{proc.name}</div>
                                                        <div className="process-desc">{proc.desc}</div>
                                                    </div>
                                                    {idx < selectedStep.process.length - 1 && (
                                                        <div className="arrow">→</div>
                                                    )}
                                                </React.Fragment>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {selectedStep.features && (
                                    <div className="detail-section">
                                        <h3>주요 기능</h3>
                                        {selectedStep.features.map((feature, idx) => (
                                            <div key={idx} className="document-card">
                                                <h4>{feature.name}</h4>
                                                <p>{feature.desc}</p>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedStep.schedule && (
                                    <div className="detail-section">
                                        <h3>감사 일정</h3>
                                        {selectedStep.schedule.map((item, idx) => (
                                            <div key={idx} className="document-card">
                                                <h4>{item.frequency}</h4>
                                                <p><strong>{item.activity}</strong></p>
                                                <p>담당: {item.responsible}</p>
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedStep.checklist && (
                                    <div className="checklist">
                                        <h4>✅ 체크리스트</h4>
                                        <ul>
                                            {selectedStep.checklist.map((item, idx) => (
                                                <li key={idx}>{item}</li>
                                            ))}
                                        </ul>
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'sample' && (
                            <div>
                                <div className="detail-section">
                                    <h3>📄 실무 샘플 문서</h3>
                                    {selectedStep.documents && selectedStep.documents.map((doc, idx) => (
                                        <div key={idx} style={{marginBottom: '30px'}}>
                                            <h4>{doc.name}</h4>
                                            <div className="sample-box">
                                                <pre>{doc.sample}</pre>
                                            </div>
                                        </div>
                                    ))}
                                    {selectedStep.measures && selectedStep.measures.map((measure, idx) => (
                                        measure.sample && (
                                            <div key={idx} style={{marginBottom: '30px'}}>
                                                <h4>{measure.target} - {measure.action}</h4>
                                                <div className="sample-box">
                                                    <pre>{measure.sample}</pre>
                                                </div>
                                            </div>
                                        )
                                    ))}
                                    {selectedStep.systems && selectedStep.systems.map((system, idx) => (
                                        system.sample && (
                                            <div key={idx} style={{marginBottom: '30px'}}>
                                                <h4>{system.name}</h4>
                                                <div className="sample-box">
                                                    <pre>{system.sample}</pre>
                                                </div>
                                            </div>
                                        )
                                    ))}
                                    {selectedStep.features && selectedStep.features.map((feature, idx) => (
                                        feature.sample && (
                                            <div key={idx} style={{marginBottom: '30px'}}>
                                                <h4>{feature.name}</h4>
                                                <div className="sample-box">
                                                    <pre>{feature.sample}</pre>
                                                </div>
                                            </div>
                                        )
                                    ))}
                                    {selectedStep.schedule && selectedStep.schedule.map((item, idx) => (
                                        item.sample && (
                                            <div key={idx} style={{marginBottom: '30px'}}>
                                                <h4>{item.activity}</h4>
                                                <div className="sample-box">
                                                    <pre>{item.sample}</pre>
                                                </div>
                                            </div>
                                        )
                                    ))}
                                    {selectedStep.sample && (
                                        <div className="sample-box">
                                            <pre>{selectedStep.sample}</pre>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'links' && (
                            <div className="detail-section">
                                <h3>🔗 참고 링크 및 자료</h3>
                                <div className="link-section">
                                    <ul className="link-list">
                                        {selectedStep.documents && selectedStep.documents.flatMap(doc => 
                                            doc.links.map((link, idx) => (
                                                <li key={`doc-${idx}`}>
                                                    <a href={link.url} target="_blank" rel="noopener noreferrer" className="link-item">
                                                        🔗 {link.text}
                                                    </a>
                                                </li>
                                            ))
                                        )}
                                        {selectedStep.links && selectedStep.links.map((link, idx) => (
                                            <li key={idx}>
                                                <a href={link.url} target="_blank" rel="noopener noreferrer" className="link-item">
                                                    🔗 {link.text}
                                                </a>
                                            </li>
                                        ))}
                                    </ul>

                                    <div className="warning-box" style={{marginTop: '30px'}}>
                                        <strong>💡 추천 학습 자료</strong>
                                        <ul style={{marginTop: '10px', paddingLeft: '20px'}}>
                                            <li>개인정보보호위원회 - 법령 및 지침: <a href="https://www.pipc.go.kr/np/cop/bbs/selectBoardList.do?bbsId=BS074&mCode=D010030000" target="_blank">바로가기</a></li>
                                            <li>한국인터넷진흥원 - 보호나라: <a href="https://www.boho.or.kr" target="_blank">바로가기</a></li>
                                            <li>ISMS-P 인증기준: <a href="https://isms.kisa.or.kr/main/ispims/notice/?boardId=bbs_0000000000000000&mode=view&cntId=15&category=&pageIdx=" target="_blank">바로가기</a></li>
                                            <li>클라우드 서비스 정보보호 안내서: <a href="https://www.kisa.or.kr/2060204/form?postSeq=5&lang_type=KO" target="_blank">바로가기</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>